{"posts":[{"title":"1000ç§ç‚¼ä¸¹æ‰‹æ³•","text":"æœ¬æ–‡ä¸»è¦ç”¨æ¥è®°å½•ç¬”è€…åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­å¸¸ç”¨çš„æ–¹æ³•ã€‚ pythonè®­ç»ƒæ—¶æŒ‡å®šGPU å‚è€ƒè‡ªæ–‡ç«  åœ¨pyæ–‡ä»¶é‡ŒæŒ‡å®š12345678910111213141516import osos.environ[&quot;CUDA_DEVICE_ORDER&quot;] = &quot;PCI_BUS_ID&quot; #å¯ä¸å†™os.environ[&quot;CUDA_VISIBLE_DEVICES&quot;] = &quot;0&quot; #0å°±æ˜¯æŒ‡å®šGPU 0 è·‘å®éªŒï¼Œå¯æŒ‰éœ€ä¿®æ”¹æˆå…¶ä»–GPU# è®¾ç½®å®šé‡çš„GPUä½¿ç”¨é‡(å¦‚æœæ˜¯TensorFlowæ¡†æ¶ï¼‰import tensorflow as tfconfig = tf.ConfigProto() config.gpu_options.per_process_gpu_memory_fraction = 0.9 # å ç”¨GPU90%çš„æ˜¾å­˜ session = tf.Session(config=config)# è®¾ç½®æœ€å°çš„GPUä½¿ç”¨é‡config = tf.ConfigProto() config.gpu_options.allow_growth = True (or) åœ¨ç»ˆç«¯æŒ‡å®š1CUDA_VISIBLE_DEVICES=0 python your_code.py #0è¡¨ç¤ºGPU0ï¼ŒæŒ‰éœ€ä¿®æ”¹ åŠ¨æ€æŸ¥çœ‹GPUå ç”¨ç‡12watch -n1 nvidia-smi æ•°å­—`1` è¡¨ç¤ºæ¯1ç§’åˆ·æ–°ç•Œé¢ ä½¿ç”¨Screenè§£å†³sshè¿æ¥ä¸­æ–­å¯¼è‡´çš„è®­ç»ƒä¸­æ–­é—®é¢˜ å®‰è£…screen 1sudo apt-get install screen åˆ›å»ºä¸€ä¸ªä¼šè¯çª—å£(Session) 12$ screen -S SessionNamescreen -S train åˆ—å‡ºæ‰€æœ‰çš„ä¼šè¯çª—å£ 1234$ screen -lsThere is a screen on: 1622.train (01/31/21 19:32:12) (Attached)1 Socket in /run/screen/S-root. è¿›å…¥æŒ‡å®šçª—å£ 123screen -r 1622 # 1622ä¸ºsessionçš„è¿æ¥id# æˆ–è€…ä¹Ÿå¯ä»¥screen -r SessionName # å¯¹åº”1622çš„è¯æ­¤å¤„åº”ä¸ºtrain ä¸çª—å£åˆ†ç¦» 1screen -d 1622 é‡æ–°è¿æ¥çª—å£ 123screen -x 1622# å¦‚æœ‰éœ€è¦å¯ä»¥å…ˆåˆ†ç¦»å†é‡æ–°è¿æ¥screen -d -r 1622 åˆ é™¤çª—å£ 1screen -X -S 1622 quit è¿œç¨‹æŸ¥çœ‹éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„Tensorboardwindowsç³»ç»Ÿ åœ¨Windowsç³»ç»Ÿè£…ä¸€ä¸ªXshellæˆ–FinalShellï¼Œç¼–è¾‘SSHè¿æ¥â†’éš§é“â†’æ·»åŠ ï¼Œç±»å‹ä¸ºlocalï¼ˆæœ¬åœ°ï¼‰ï¼Œæºä¸»æœºï¼ˆç»‘å®šipï¼‰å¡«127.0.0.1ï¼Œç«¯å£éšæ„è®¾ç½®ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£å¦‚12345ï¼Œç›®æ ‡ä¸»æœºä¸ºæœåŠ¡å™¨ipï¼Œç›®æ ‡ç«¯å£ä¸€èˆ¬æ˜¯6006ï¼Œä¹Ÿå¯æ”¹æˆå…¶ä»–ç«¯å£ã€‚ åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ tensorboard --logdir='logs' --port 6006ã€‚ åœ¨æœ¬æœºæ‰“å¼€ç½‘é¡µ127.0.0.1:12345 Macæˆ–Linuxç³»ç»Ÿ åœ¨ç™»å½•è¿œç¨‹æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨å‘½ä»¤ï¼š 1ssh -L 16006:127.0.0.1:6006 account@server.address è®­ç»ƒå®Œæ¨¡å‹ä¹‹åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1tensorboard --logdir=&quot;/path/to/log-directory&quot; æœ€åï¼Œåœ¨æœ¬åœ°è®¿é—®åœ°å€ï¼šhttp://127.0.0.1:16006/ ä¼°ç®—ä¸€ä¸ªæ·±åº¦æ¨¡å‹çš„è®¡ç®—é‡å’Œå‚æ•°ß’á ¥ß¥ê©”HOP: PyTorch-OpCounter Official URL: https://github.com/Lyken17/pytorch-OpCounter å®‰è£… 123pip install thop# orpip install --upgrade git+https://github.com/Lyken17/pytorch-OpCounter.git ä½¿ç”¨ åŸºç¡€ç”¨æ³• 12345from torchvision.models import resnet50from thop import profilemodel = resnet50()input = torch.randn(1, 3, 224, 224)macs, params = profile(model, inputs=(input,)) å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—å®šä¹‰è§„åˆ™ 123456789class YourModule(nn.Module) # your definitiondef count_your_model(model, x, y): # your rule hereinput = torch.randn(1, 3, 224, 224)macs, params = profile(model, inputs=(input,), custom_ops={YourModule: count_your_model}) æ”¹å–„profileè¾“å‡ºå¯è¯»æ€§ è°ƒç”¨thop.clever_formatå¯¹profileç»“æœæ ¼å¼åŒ– 12from thop import clever_formatmacs, params = clever_format([macs, params], &quot;%.3f&quot;) DistributedDataParallel (DDP)Concepts rankï¼šç”¨äºè¡¨ç¤ºè¿›ç¨‹çš„ç¼–å·/åºå·ï¼ˆåœ¨ä¸€äº›ç»“æ„å›¾ä¸­rankæŒ‡çš„æ˜¯è½¯èŠ‚ç‚¹ï¼Œrankå¯ä»¥çœ‹æˆä¸€ä¸ªè®¡ç®—å•ä½ï¼‰ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹å¯¹åº”äº†ä¸€ä¸ªrankçš„è¿›ç¨‹ï¼Œæ•´ä¸ªåˆ†å¸ƒå¼ç”±è®¸å¤šrankå®Œæˆã€‚ nodeï¼šç‰©ç†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä¸€å°æœºå™¨ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå®¹å™¨ï¼ŒèŠ‚ç‚¹å†…éƒ¨å¯ä»¥æœ‰å¤šä¸ªGPUã€‚ rankä¸local_rankï¼š rankæ˜¯æŒ‡åœ¨æ•´ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ä¸­è¿›ç¨‹çš„åºå·ï¼›local_rankæ˜¯æŒ‡åœ¨ä¸€ä¸ªnodeä¸Šè¿›ç¨‹çš„ç›¸å¯¹åºå·ï¼Œlocal_rankåœ¨nodeä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚ï¼ˆæ³¨æ„ï¼šåœ¨ä»£ç ä¸­ï¼Œä¼šä½¿ç”¨local_rankæ¥æŒ‡å®šGPUï¼Œå¹¶ä¸”local_rankå’Œå®é™…çš„gpuç¼–å·å­˜åœ¨æ˜ å°„å…³ç³»ï¼Œæ¯”å¦‚ï¼ŒæŒ‡å®šgpu 4,5è¿›è¡Œè®­ç»ƒï¼Œlocal_rankä»ç„¶æ˜¯0,1ï¼Œä½†å‰ææ˜¯è¦å…ˆè®¾ç½®os.environ[â€˜CUDA_VISIBLE_DEVICESâ€™] = â€œ4,5â€ï¼‰ã€‚ nnodesã€node_rankä¸nproc_per_nodeï¼š nnodesæ˜¯æŒ‡ç‰©ç†èŠ‚ç‚¹æ•°é‡ï¼Œnode_rankæ˜¯ç‰©ç†èŠ‚ç‚¹çš„åºå·ï¼›nproc_per_nodeæ˜¯æŒ‡æ¯ä¸ªç‰©ç†èŠ‚ç‚¹ä¸Šé¢è¿›ç¨‹çš„æ•°é‡ã€‚ word size ï¼š å…¨å±€ï¼ˆä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ï¼‰ä¸­ï¼Œrankçš„æ•°é‡ã€‚ ğŸ’¡ RANKæ˜¯å…¨å±€è¿›ç¨‹çš„åºå·ï¼Œè€ŒLOCAL_RANKå¯ä»¥ç†è§£ä¸ºæ¯ä¸ªè¿›ç¨‹ä¸­çº¿ç¨‹çš„åºå·ã€‚ Examples è·å–å…¨å±€å˜é‡ 12345import osLOCAL_RANK = int(os.getenv('LOCAL_RANK', -1))RANK = int(os.getenv('RANK', -1))WORLD_SIZE = int(os.getenv('WORLD_SIZE', 1)) æ ¹æ®LOCAL_RANKç»™æ¯ä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹åˆ†é…GPU 123456if LOCAL_RANK != -1: assert torch.cuda.device_count() &gt; LOCAL_RANK, 'insufficient CUDA devices for DDP command' print(&quot;torch.cuda.device_count():&quot;, torch.cuda.device_count()) torch.cuda.set_device(LOCAL_RANK) device = torch.device(&quot;cuda&quot;, LOCAL_RANK) dist.init_process_group(backend=&quot;nccl&quot; if dist.is_nccl_available() else &quot;gloo&quot;) ä»…åœ¨ä¸»è¿›ç¨‹ä¸­ä¿å­˜æ—¥å¿—ä¿¡æ¯ï¼Œé¿å…æ‰“å°æ··ä¹± 12345678# loggerif RANK in {-1, 0}: logger.info(&quot;Message...&quot;)# pbarpbar = enumerate(train_loader) if RANK in {-1, 0}: pbar = tqdm(pbar, total=steps_per_epoch, desc='Epoch {}/{}'.format(epoch, args.max_epochs)) åœ¨å•æœºå•å¡ä»¥å¤–çš„æ¨¡å¼ï¼Œéœ€è¦è®¾ç½®åˆ†å¸ƒå¼é‡‡æ ·å™¨ 1234from torch.utils.data import distributeddataset = Dataset()sampler = None if LOCAL_RANK == -1 else distributed.DistributedSampler(dataset, shuffle=True) åœ¨ä¸»è¿›ç¨‹ä»¥å¤–çš„è¿›ç¨‹ä¸­å°è£…DDP 1234567from torch.nn.parallel import DistributedDataParallel as DDPif RANK != -1: # Sync batch norm model = torch.nn.SyncBatchNorm.convert_sync_batchnorm(model).to(device) # DDP model = DDP(model, device_ids=[LOCAL_RANK], output_device=LOCAL_RANK) Shell commonds123456789101112131415161718192021# å‘½ä»¤è¡ŒæŒ‡å®šGPUè®¾å¤‡# å•æœºå•å¡python main.py --device 0# å•æœºå¤šå¡python -m torch.distributed.launch --nproc_per_node 2 main.py# æŒ‡å®šæŸå‡ å¼ GPUpython -m torch.distributed.launch --nproc_per_node 2 main.py --device 0,3# å¤šæœºå¤šå¡# - master_address: masterè¿›ç¨‹çš„ç½‘ç»œåœ°å€# - master_port: masterè¿›ç¨‹çš„ä¸€ä¸ªç«¯å£ï¼Œé»˜è®¤29500ï¼Œä½¿ç”¨å‰éœ€è¦ç¡®è®¤ç«¯å£æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨# èŠ‚ç‚¹0python -m torch.distributed.launch --nproc_node=8 --nnodes=2 --node_rank=0 --master_address=&quot;192.168.0.1&quot; --master_port=12345 train.py# èŠ‚ç‚¹1python -m torch.distributed.launch --nproc_node=8 --nnodes=2 --node_rank=1 --master_address=&quot;192.168.0.1&quot; --master_port=12345 train.py Automatic Mixed Precision (AMP)ä¸¾ä¾‹: 12345678910111213141516import torchscaler = torch.cuda.amp.GradScaler(enabled=True)optimizer.zero_grad()# Casts operations to mixed precisionwith torch.cuda.amp.autocast(enabled=True): loss = model(data)# Scales the loss, and call backward() to create scaled gradientsscaler.scale(loss).backward()# Unscales gradients and calls or skips optimizer.step()scaler.step(optimizer)# Updates the scale for next iterationscaler.update()","link":"/2023/11/17/1000%E7%A7%8D%E7%82%BC%E4%B8%B9%E6%89%8B%E6%B3%95/"},{"title":"Dockerå¸¸ç”¨å‘½ä»¤","text":"æœ¬æ–‡ç®€å•è®°å½•DockeræœåŠ¡å¸¸ç”¨çš„å‘½ä»¤ã€‚ DockeræœåŠ¡ å¯åŠ¨Docker å®ˆæŠ¤è¿›ç¨‹ 1systemctl daemon-reload Dockerå¯åŠ¨å‘½ä»¤ï¼š 1systemctl start docker æŸ¥çœ‹dockeræœåŠ¡æ˜¯å¦å¯åŠ¨ 1ps -ef | grep docker æŸ¥çœ‹dockerå¯åŠ¨çš„æœåŠ¡ï¼š 1docker ps åœæ­¢dockeræœåŠ¡ 1systemctl stop docker é‡å¯dockeræœåŠ¡ 1systemctl restart docker å®¹å™¨çš„å¯¼å…¥/å¯¼å‡º/åˆ é™¤ æŸ¥çœ‹é•œåƒï¼ˆå¿…é¡»æ˜¯æ­£åœ¨è¿è¡Œä¸­çš„ï¼‰ 1docker ps å¯¼å‡ºæŸä¸ªå®¹å™¨ 1docker export $container_id &gt; [å®¹å™¨å¿«ç…§å.tar] å¯¼å…¥æŸä¸ªå®¹å™¨ 1cat [å®¹å™¨å¿«ç…§å.tar] | docker import - [IMAGE] ä¿å­˜å®¹å™¨åˆ°é•œåƒ 1docker commit [OPTIONS] [CONTAINER ID] [IMAGE] OPTIONSè¯´æ˜ï¼š a: æäº¤çš„é•œåƒä½œè€…ï¼› c: ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒï¼› m: æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼› p: åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœã€‚ åˆ é™¤å®¹å™¨ 1docker rm -f [å®¹å™¨id] é•œåƒçš„å¯¼å…¥/ä¿å­˜/è½½å…¥/åˆ é™¤ æŸ¥çœ‹é•œåƒ 1docker images å¯¼å…¥é•œåƒ 1cat [é•œåƒæ–‡ä»¶] | docker import - [IMAGE] ä¿å­˜é•œåƒ 12docker save -o [è¦ä¿å­˜çš„é•œåƒåå­—] [è¦ä¿å­˜çš„é•œåƒ]docker save REPOSITORY:TAG &gt; /path/to/file.tar è½½å…¥é•œåƒ 1docker load &lt; [æœ¬åœ°çš„é•œåƒåå­—] åˆ é™¤é•œåƒ 123456789 docker rmi -f [image_id] ``` # åº”ç”¨åœºæ™¯## è¿›å…¥å®¹å™¨```bashdocker exec -it [container_name] bash å¤šä¸ªdockeræŒ‚è½½åŒä¸€ä¸ªå®¿ä¸»æœºçš„æ–‡ä»¶ç›®å½•ç¬¬ä¸€ä¸ªå®¹å™¨ä½¿ç”¨ 1docker run -it --privileged=true --name docker1 -v /data-volume/:/data-volume centos ç¬¬äºŒä¸ª~ç¬¬Nä¸ªå®¹å™¨ 1docker run -it --privileged=true --name docker2 --volumes-from docker1 centos ä¸»è¦å‚æ•°è¯´æ˜: -privileged=true //ä»£è¡¨èµ‹äºˆå®¹å™¨ç‰¹æƒ,å¯ä»¥å¯¹æŒ‚è½½çš„ç›®å½•è¿›è¡Œè¯»å†™æ“ä½œ v /data-volume/:/data-volume //å°†å®¿ä¸»æœºçš„ç›®å½•/data-volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/data-volumeç›®å½•(åªéœ€è¦ç¬¬ä¸€ä¸ªå®¹å™¨è¿™æ ·æŒ‚è½½ï¼Œå‰©ä¸‹çš„å®¹å™¨ä½¿ç”¨â€“volumes-fromå‚æ•°) -volumes-from //å‚æ•°åé¢è·Ÿç€çš„docker1 æ˜¯æ•°æ®å·å®¹å™¨åå­—ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå®¹å™¨çš„åå­—ï¼Œè¿™é‡Œç¬¬ä¸€ä¸ªå®¹å™¨å°±è¢«å½“åšæ•°æ®å·å®¹å™¨äº†ã€‚ â€“name //å®¹å™¨çš„åå­—ï¼Œå¿…é¡»å”¯ä¸€ï¼Œä¸å…¶ä»–çš„å®¹å™¨åå­—ä¸å¯é‡å¤","link":"/2023/11/16/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"},{"title":"Gitå¸¸ç”¨å‘½ä»¤","text":"æœ¬æ–‡ç²—ç•¥è®°å½•ç¬”è€…å…³äºä½¿ç”¨Gitçš„ä¸»è¦å‘½ä»¤ã€‚ é…ç½®è´¦æˆ·12git config --global user.name &quot;your name&quot;git config --global user.email &quot;your email address&quot; ä»£ç†socks512git config --global http.proxy socks5://127.0.0.1:1080git config --global https.proxy socks5://127.0.0.1:1080 http/https12git config --global http.proxy http://127.0.0.1:1080git config --global https.proxy https://127.0.0.1:1080 é‡ç½®12git config --global --unset http.proxygit config --global --unset https.proxy åŸºç¡€å‘½ä»¤pullæè¿°ï¼šç”¨äºä»è¿œç¨‹è·å–ä»£ç å¹¶åˆå¹¶æœ¬åœ°çš„ç‰ˆæœ¬ã€‚ å‘½ä»¤ä½¿ç”¨ï¼š 1git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt; ç›¸å…³å‘½ä»¤ï¼š 12345# å°†è¿œç¨‹ä¸»æœºoriginçš„masteråˆ†æ”¯æ‹‰å»è¿‡æ¥ï¼Œä¸æœ¬åœ°çš„branchteståˆ†æ”¯åˆå¹¶ã€‚git pull origin master:branchtest#å¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚git pull origin master commitæè¿°ï¼š å‘½ä»¤ä½¿ç”¨ï¼š ç›¸å…³å‘½ä»¤ï¼š pushæè¿°ï¼š å‘½ä»¤ä½¿ç”¨ï¼š ç›¸å…³å‘½ä»¤ï¼š è¿›é˜¶å‘½ä»¤stashæè¿°ï¼šè¯¥å‘½ä»¤å°†ä¿å­˜æœ¬åœ°ä¿®æ”¹ï¼Œå¹¶æ¢å¤å¹²å‡€çš„å·¥ä½œç›®å½•ã€‚ åº”ç”¨åœºæ™¯ï¼šå½“æƒ³åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯å½“å‰åˆ†æ”¯æœ‰æ–‡ä»¶æ›´æ”¹äº†ï¼Œéœ€è¦ä¿æŒå·¥ä½œåŒºå¹²å‡€æ‰èƒ½åˆ‡åˆ†æ”¯ã€‚ å‘½ä»¤ä½¿ç”¨ï¼š 1git stash ç›¸å…³å‘½ä»¤ï¼š 1234567891011121314151617# ä¿å­˜å½“å‰æœªcommitçš„ä»£ç å¹¶æ·»åŠ å¤‡æ³¨git stash save &quot;å¤‡æ³¨çš„å†…å®¹&quot;# åˆ—å‡ºstashçš„æ‰€æœ‰è®°å½•git stash list# åˆ é™¤stashçš„æ‰€æœ‰è®°å½•git stash clear# åº”ç”¨æœ€è¿‘ä¸€æ¬¡çš„stashgit stash apply# åº”ç”¨æœ€è¿‘ä¸€æ¬¡çš„stashï¼Œéšååˆ é™¤è¯¥è®°å½•git stash pop# åˆ é™¤æœ€è¿‘çš„ä¸€æ¬¡stashgit stash drop gitä»“åº“æäº¤åˆ†æ”¯åˆ°å¦ä¸€ä¸ªä»“åº“å‡è®¾æœ‰ä»“åº“repo_aå’Œä»“åº“repo_bï¼Œç›®çš„æ˜¯è¦å°†ä»“åº“repo_açš„branch_teståˆ†æ”¯æäº¤åˆ°ä»“åº“repo_bã€‚ å…ˆå°†repo_aæ‹‰å–åˆ°æœ¬åœ° 1git clone https://github.com/.../repo_a.git åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œèµ·ç‚¹masterï¼ˆå¦‚æœå·²æœ‰åˆ†æ”¯è·³è¿‡è¯¥æ­¥éª¤ï¼‰ 1git branch branch_test master æ·»åŠ repo_bçš„è¿œç¨‹åœ°å€ 1git remote add repo_b_branch https://github.com/.../repo_b.git å¯ä»¥æŸ¥çœ‹å·²æœ‰çš„è¿œç¨‹è·¯å¾„ 1git remote -v æ¨é€branch_teståˆ†æ”¯åˆ°repo_b å¦‚æœè¦ä½¿ç”¨å¦å¤–çš„åˆ†æ”¯åï¼Œä¾‹å¦‚repo_b_new_branchï¼Œåœ¨åˆ†æ”¯åé¢ä½¿ç”¨å†’å·åŠ æ–°çš„åˆ†æ”¯åç§° 1git push repo_b_branch branch_test:repo_b_new_branch å¦‚æœè¿œç¨‹å·²æœ‰è¯¥åˆ†æ”¯ï¼Œæ¨é€ä¼šæŠ¥é”™ éœ€è¦å…ˆä»è¿œç¨‹æ‹‰å–ï¼Œåœ¨æœ¬åœ°mergeä»¥åï¼Œå¯ä»¥æäº¤ã€‚ å…‹éš†è¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯1git clone -b branchA https://github.com/.../repo.git æ‹‰å–å¦ä¸€ä¸ªè¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯ é¦–å…ˆåœ¨æœ¬åœ°ä»“åº“æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ 1git remote add origin/&lt;branch&gt; https://github.com/.../xxx.git ç„¶åæ‹‰å–æŒ‡å®šåˆ†æ”¯ 1git pull origin &lt;branch&gt; Git submoduleä»¥åº“æˆ–æ¨¡å—çš„å½¢å¼åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰ä»£ç ï¼Œåˆå’Œè‡ªå·±çš„ä»£ç éš”ç¦» åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜å‚¨ç¬¬ä¸‰æ–¹åº“ 12mkdir libcd lib å°†ç¬¬ä¸‰æ–¹åº“ä»¥submoduleçš„æ–¹å¼æ³¨å…¥åˆ°é¡¹ç›®ä¸­ 1git submodule add https://github.com/xxx/xxx.git ç¬¬ä¸‰æ–¹åº“å°†ä¼šè¢«cloneåˆ°æ–‡ä»¶å¤¹ä¸­","link":"/2023/11/14/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"},{"title":"Homebrew","text":"æœ¬æ–‡ç®€å•è®°å½•å®‰è£…Homebrewçš„æ­¥éª¤ã€‚ å®‰è£…æ–¹æ³•ä¸€ï¼šbrewå®˜ç½‘çš„å®‰è£…è„šæœ¬æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ 1/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot; è¯¥æ–¹æ³•æä¸ç¨³å®šï¼ŒåŸå› æ˜¯ https://raw.githubusercontent.com è®¿é—®ä¸ç¨³å®šã€‚ æ–¹æ³•äºŒï¼šbrewé•œåƒå®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰1/bin/bash -c &quot;$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh)&quot; æ›´æ–°1brew update æ›¿æ¢æ›´æ–°æº123456789101112131415161718192021222324# æ›¿æ¢brew.git:cd &quot;$(brew --repo)&quot;# ä¸­å›½ç§‘å¤§:git remote set-url origin https://mirrors.ustc.edu.cn/brew.git# æ¸…åå¤§å­¦:git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git# æ›¿æ¢homebrew-core.git:cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot;# ä¸­å›½ç§‘å¤§:git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git# æ¸…åå¤§å­¦:git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git# æ›¿æ¢homebrew-bottles:# ä¸­å›½ç§‘å¤§:echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profilesource ~/.bash_profile# æ¸…åå¤§å­¦:echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profilesource ~/.bash_profile# åº”ç”¨ç”Ÿæ•ˆ:brew update å¦‚æœä½ ä¹‹å‰æŠ˜è…¾è¿‡ä¸å°‘å¯¼è‡´ä½ çš„ Homebrew æœ‰ç‚¹é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä½¿ç”¨å¦‚ä¸‹æ–¹æ¡ˆï¼š 123456789101112131415# è¯Šæ–­Homebrewçš„é—®é¢˜:brew doctor# é‡ç½®brew.gitè®¾ç½®:cd &quot;$(brew --repo)&quot;git fetchgit reset --hard origin/master# homebrew-core.gitåŒç†:cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot;git fetchgit reset --hard origin/master# åº”ç”¨ç”Ÿæ•ˆ:brew update é‡ç½®æ›´æ–°æº æŸäº›æ—¶å€™ä¹Ÿæœ‰æ¢å›å®˜æ–¹æºçš„éœ€æ±‚12345# é‡ç½®brew.git:cd &quot;$(brew --repo)&quot;$ git remote set-url origin https://github.com/Homebrew/brew.git# é‡ç½®homebrew-core.git:cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot;$ git remote set-url origin https://github.com/Homebrew/homebrew-core.git Thanks Macå®‰è£…Homebrewçš„æ­£ç¡®å§¿åŠ¿ update Homebrew å¤ªæ…¢ï¼Œæ›´æ¢Homebrewçš„æ›´æ–°æº","link":"/2023/11/17/Homebrew/"},{"title":"Linuxå®ç°è¿œç¨‹æ¡Œé¢ç¯å¢ƒ","text":"æœ¬æ–‡ç®€å•è®°å½•åœ¨Linuxå®ç°è¿œç¨‹è¿æ¥æ¡Œé¢ç¯å¢ƒæ‰€éœ€å®‰è£…çš„ä¾èµ–ã€‚ ç¯å¢ƒå®‰è£… å®‰è£…xfce4å’Œxrdp 12sudo apt-get update -ysudo apt-get install -y xfce4 xrdp --fix-missing ä¿®æ”¹é»˜è®¤é…ç½® 1234567891011121314$ sudo vim /etc/xrdp/xrdp.ini# ä¿®æ”¹é»˜è®¤çš„é€šä¿¡ç«¯å£3389ï¼Œé˜²æ­¢å’Œwindowsç³»ç»Ÿçš„è¿œç¨‹æ¡Œé¢å†²çªport=3390# ä¿®æ”¹Xorgé…ç½®éƒ¨åˆ†ä»¥ä¿å­˜ç™»å½•ä½¿ç”¨çš„è´¦å·å¯†ç ï¼Œå³å¯å®ç°å…å¯†ç™»å½•[Xorg]name=Xorglib=libxup.sousername=[USERNAME]password=[PASSWORD]ip=127.0.0.1port=-1code=20 æŒ‡å®šsessionä¼šè¯ 1echo &quot;xfce4-session&quot; &gt;&gt; ~/.xsession å¯ç”¨æœåŠ¡1sudo /etc/init.d/xrdp start","link":"/2023/11/17/Linux%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83/"},{"title":"SSH","text":"æœ¬æ–‡ç²—ç•¥è®°å½•äº†å…³äºSSHå‘½ä»¤çš„å®‰è£…å’Œå¸¸è§ä½¿ç”¨ã€‚ å®‰è£… å®‰è£…sshæœåŠ¡ 1apt-get install openssh-server ä¿®æ”¹sshé…ç½®,å…è®¸rootç™»å½• ä¸€èˆ¬è¿›å…¥å®¹å™¨æ—¶ä½¿ç”¨çš„éƒ½æ˜¯ root è´¦å·ï¼Œä½†æ˜¯ ssh é»˜è®¤æ˜¯ç¦æ­¢ root è´¦å·ä½¿ç”¨å¯†ç è¿œç¨‹ç™»å½•çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ ssh é…ç½®æ–‡ä»¶ä½¿å…¶å…è®¸ï¼š 1234vim /etc/ssh/sshd_config# å°†PermitRootLoginçš„å€¼ä»withoutPasswordæ”¹ä¸ºyesï¼ˆå»æ‰å‰é¢çš„#å·ï¼‰# å¦‚æœæ²¡æœ‰vimå¯ä»¥å®‰è£…ä¸ªï¼šapt-get install vim å¯åŠ¨sshæœåŠ¡ 1service ssh start åˆ¤æ–­sshæœåŠ¡æ˜¯å¦æˆåŠŸå¯åŠ¨ 12345678910åœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼šps -e|grep sshï¼Œå¯ä»¥æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œå¦‚æœæœ‰sshdï¼Œå°±è¯´æ˜å¯åŠ¨æˆåŠŸã€‚$ sudo ps -e | grep ssh 4031 ? 00:00:00 sshd------å¯¹åº”æœåŠ¡å™¨ç«¯sshdè¡¨ç¤ºssh-serverå¯åŠ¨äº†å¦å¤–è¿˜å¯ä»¥æŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€sudo netstat -tnlp å‘½ä»¤æ ¼å¼1ssh [OPTIONS] [-p PORT] [USER@]HOSTNAME [COMMAND] é€‰é¡¹è¯´æ˜ï¼š -1 å¼ºåˆ¶åªä½¿ç”¨åè®®ç¬¬ä¸€ç‰ˆ -2 å¼ºåˆ¶åªä½¿ç”¨åè®®ç¬¬äºŒç‰ˆ -4 å¼ºåˆ¶åªä½¿ç”¨ IPv4 åœ°å€-6 å¼ºåˆ¶åªä½¿ç”¨ IPv6 åœ°å€-A å…è®¸è½¬å‘è®¤è¯ä»£ç†çš„è¿æ¥ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹æ¯ä¸ªä¸»æœºå•ç‹¬è®¾å®šè¿™ä¸ªå‚æ•°-a ç¦æ­¢è½¬å‘è®¤è¯ä»£ç†çš„è¿æ¥-b BIND_ADDRESS åœ¨æ‹¥æœ‰å¤šä¸ªåœ°å€çš„æœ¬åœ°æœºå™¨ä¸Šï¼ŒæŒ‡å®šè¿æ¥çš„æºåœ°å€-C å‹ç¼©æ‰€æœ‰æ•°æ®ã€‚å‹ç¼©ç®—æ³•ä¸ gzip(1) ä½¿ç”¨çš„ç›¸åŒ-c {blowfish | 3des | des} é€‰æ‹©ä¼šè¯çš„å¯†ç ç®—æ³•ã€‚3des æ˜¯é»˜è®¤ç®—æ³•-c CIPHER_SPEC å¦å¤–, å¯¹äºåè®®ç¬¬äºŒç‰ˆï¼Œè¿™é‡Œå¯ä»¥æŒ‡å®šä¸€ç»„ç”¨é€—å·éš”å¼€ã€æŒ‰ä¼˜å…ˆé¡ºåºæ’åˆ—çš„åŠ å¯†ç®—æ³•-D [BIND_ADDRESS:]PORT æŒ‡å®šä¸€ä¸ªæœ¬åœ°ä¸»æœºåŠ¨æ€çš„åº”ç”¨ç¨‹åºçº§çš„è½¬å‘ç«¯å£ã€‚å·¥ä½œåŸç†æ˜¯è¿™æ ·çš„ï¼Œæœ¬åœ°æœºå™¨ä¸Šåˆ†é…äº†ä¸€ä¸ª socket ä¾¦å¬ port ç«¯å£ï¼Œä¸€æ—¦è¿™ä¸ªç«¯å£ä¸Šæœ‰äº†è¿æ¥ï¼Œè¯¥è¿æ¥å°±ç»è¿‡å®‰å…¨é€šé“è½¬å‘å‡ºå»ï¼Œæ ¹æ®åº”ç”¨ç¨‹åºçš„åè®®å¯ä»¥åˆ¤æ–­å‡ºè¿œç¨‹ä¸»æœºå°†å’Œå“ªé‡Œè¿æ¥ã€‚ç›®å‰æ”¯æŒ SOCKS4 å’Œ SOCKS5 åè®®ï¼Œè€Œ ssh å°†å……å½“ SOCKS æœåŠ¡å™¨. åªæœ‰ root æ‰èƒ½è½¬å‘ç‰¹æƒç«¯å£ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šåŠ¨æ€ç«¯å£çš„è½¬å‘-e ESCAPE_CHAR è®¾ç½® pty ä¼šè¯çš„è½¬ä¹‰å­—ç¬¦ï¼Œé»˜è®¤ä¸ºå­—ç¬¦ ~ã€‚è½¬ä¹‰å­—ç¬¦åªåœ¨è¡Œé¦–æœ‰æ•ˆï¼Œè½¬ä¹‰å­—ç¬¦åé¢è·Ÿä¸€ä¸ªç‚¹è¡¨ç¤ºç»“æŸè¿æ¥ï¼Œåè·Ÿä¸€ä¸ª control-Z è¡¨ç¤ºæŒ‚èµ·è¿æ¥ï¼Œè·Ÿè½¬ä¹‰å­—ç¬¦è‡ªå·±è¡¨ç¤ºè¾“å‡ºè½¬ä¹‰å­—ç¬¦è‡ªèº«ã€‚æŠŠè½¬ä¹‰å­—ç¬¦è®¾ä¸º none åˆ™ç¦æ­¢ è½¬ä¹‰åŠŸèƒ½ï¼Œä½¿ä¼šè¯å®Œå…¨é€æ˜-F CONFIGFILE æŒ‡å®š ssh æŒ‡ä»¤çš„é…ç½®æ–‡ä»¶ï¼Œå°†å¿½ç•¥ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶ /etc/ssh/ssh_config å’Œç”¨æˆ·çº§é…ç½®æ–‡ä»¶ ~/.ssh/config-f ssh åœ¨æ‰§è¡Œå‘½ä»¤å‰é€€è‡³åå°-g å…è®¸è¿œç«¯ä¸»æœºè¿æ¥æœ¬åœ°çš„è½¬å‘ç«¯å£-I SMARTCARD_DEVICE æŒ‡å®šæ™ºèƒ½å¡è®¾å¤‡ã€‚æ™ºèƒ½å¡é‡Œé¢å­˜å‚¨äº†ç”¨æˆ·çš„ RSA ç§é’¥-i IDENTITY_FILE æŒ‡å®šä¸€ä¸ª RSA æˆ– DSA è®¤è¯æ‰€éœ€çš„èº«ä»½ï¼ˆç§é’¥ï¼‰æ–‡ä»¶ã€‚åè®®ç¬¬ä¸€ç‰ˆçš„é»˜è®¤æ–‡ä»¶æ˜¯ ~/.ssh/identity ä»¥åŠåè®®ç¬¬äºŒç‰ˆçš„ ~/.ssh/id_rsa å’Œ ~/.ssh/id_dsa æ–‡ä»¶ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ª -i é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå¤šä¸ªèº«ä»½æ–‡ä»¶-K å¯ç”¨åŸºäº GSSAPI çš„èº«ä»½éªŒè¯å’Œå‘æœåŠ¡å™¨è½¬å‘ GSSAPI å‡­æ®-k ç¦ç”¨å‘æœåŠ¡å™¨è½¬å‘ GSSAPI å‡­æ®-L [BIND_ADDRESS:]PORT:HOST:HOSTPORT å°†æœ¬åœ°ä¸»æœºçš„åœ°å€å’Œç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®é€šè¿‡å®‰å…¨é€šé“è½¬å‘ç»™è¿œç¨‹ä¸»æœºçš„åœ°å€å’Œç«¯å£-l LOGIN_NAME æŒ‡å®šç™»å½•è¿œç¨‹ä¸»æœºçš„ç”¨æˆ·ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹æ¯ä¸ªä¸»æœºå•ç‹¬è®¾å®šè¿™ä¸ªå‚æ•°-M å°† ssh å®¢æˆ·ç«¯ç½®äºä¸»æ¨¡å¼è¿›è¡Œè¿æ¥å…±äº«ã€‚å¤šä¸ª -M é€‰é¡¹å°† ssh ç½®äºä¸»æ¨¡å¼ï¼Œå¹¶åœ¨æ¥å—ä»è¿æ¥ä¹‹å‰è¿›è¡Œç¡®è®¤-m MAC_SPEC å¯¹äºåè®®ç¬¬äºŒç‰ˆï¼Œå¯ä»¥æŒ‡å®šä¸€ç»„ç”¨é€—å·éš”å¼€ï¼ŒæŒ‰ä¼˜å…ˆé¡ºåºæ’åˆ—çš„ MAC (message authentication code) ç®—æ³•-N ä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œç”¨äºè½¬å‘ç«¯å£ã€‚ä»…é™åè®®ç¬¬äºŒç‰ˆ-n æŠŠ stdin é‡å®šå‘åˆ° /dev/nullï¼Œé˜²æ­¢ä» stdin è¯»å–æ•°æ®ã€‚åœ¨åå°è¿è¡Œæ—¶ä¸€å®šä¼šç”¨åˆ°è¿™ä¸ªé€‰é¡¹-O CTL_CMD æ§åˆ¶ä¸»åŠ¨è¿æ¥å¤šè·¯å¤ç”¨ä¸»è¿›ç¨‹ã€‚å‚æ•° CTL_CMD å°†è¢«ä¼ é€’ç»™ä¸»è¿›ç¨‹ã€‚CTL_CMD å¯å–å€¼ checkï¼ˆæ£€æŸ¥ä¸»è¿›ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œï¼‰å’Œ exitï¼ˆè®©ä¸»è¿›ç¨‹é€€å‡ºï¼‰-o OPTION å¯ä»¥åœ¨è¿™é‡Œç»™å‡ºæŸäº›é€‰é¡¹ï¼Œæ ¼å¼å’Œé…ç½®æ–‡ä»¶ä¸­çš„æ ¼å¼ä¸€æ ·ã€‚å®ƒç”¨æ¥è®¾ç½®é‚£äº›æ²¡æœ‰å•ç‹¬çš„å‘½ä»¤è¡Œæ ‡å¿—çš„é€‰é¡¹-p PORT æŒ‡å®šè¿œç¨‹ä¸»æœºçš„ç«¯å£ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹æ¯ä¸ªä¸»æœºå•ç‹¬è®¾å®šè¿™ä¸ªå‚æ•°-q å®‰é™æ¨¡å¼ã€‚æ¶ˆé™¤å¤§å¤šæ•°çš„è­¦å‘Šå’Œè¯Šæ–­ä¿¡æ¯-R [BIND_ADDRESS:]PORT:HOST:HOSTPORT å°†è¿œç¨‹ä¸»æœºä¸Šçš„åœ°å€å’Œç«¯å£æ¥æ”¶çš„æ•°æ®é€šè¿‡å®‰å…¨é€šé“è½¬å‘ç»™æœ¬åœ°ä¸»æœºçš„åœ°å€å’Œç«¯å£-S CTL_PATH æŒ‡å®šç”¨äºè¿æ¥å…±äº«çš„æ§åˆ¶å¥—æ¥å­—çš„ä½ç½®-s ç”¨äºè¯·æ±‚è¿œç¨‹ç³»ç»Ÿä¸Šçš„å­ç³»ç»Ÿè°ƒç”¨ã€‚å­ç³»ç»Ÿæ˜¯ SSH2 åè®®çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒæœ‰åŠ©äºå°† SSH ç”¨ä½œå…¶ä»–åº”ç”¨ç¨‹åºï¼ˆå¦‚ sftp(1)ï¼‰çš„å®‰å…¨ä¼ è¾“ã€‚å­ç³»ç»Ÿé€šè¿‡è¿œç¨‹å‘½ä»¤æŒ‡å®š-T ç¦æ­¢åˆ†é…ä¼ªç»ˆç«¯-t å¼ºåˆ¶åˆ†é…ä¼ªç»ˆç«¯ã€‚è¿™å¯ç”¨äºåœ¨è¿œç¨‹è®¡ç®—æœºä¸Šæ‰§è¡ŒåŸºäºå±å¹•çš„ä»»æ„ç¨‹åºï¼Œä¾‹å¦‚èœå•æœåŠ¡ã€‚å¤šä¸ª -t é€‰é¡¹å¼ºåˆ¶åˆ†é…ç»ˆç«¯, å³ä½¿æ²¡æœ‰æœ¬åœ°ç»ˆç«¯-V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º-v å†—è¯¦æ¨¡å¼ã€‚æ‰“å°å…³äºè¿è¡Œæƒ…å†µçš„è°ƒè¯•ä¿¡æ¯ã€‚åœ¨è°ƒè¯•è¿æ¥ã€è®¤è¯å’Œé…ç½®é—®é¢˜æ—¶éå¸¸æœ‰ç”¨ã€‚å¤šä¸ª -v é€‰é¡¹èƒ½å¤Ÿå¢åŠ å†—è¯¦ç¨‹åº¦ï¼Œæœ€å¤šä¸‰ä¸ª-W HOST:PORT å°†å®¢æˆ·ç«¯ä¸Šçš„æ ‡å‡†è¾“å…¥å’Œè¾“å‡ºé€šè¿‡å®‰å…¨é€šé“è½¬å‘ç»™æŒ‡å®šä¸»æœºçš„ç«¯å£-w LOCAL_TUN[:REMOTE_TUN] æŒ‡å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´è½¬å‘çš„éš§é“è®¾å¤‡-X å…è®¸ X11 è½¬å‘ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹æ¯ä¸ªä¸»æœºå•ç‹¬è®¾å®šè¿™ä¸ªå‚æ•°-x ç¦æ­¢ X11 è½¬å‘-Y å¯ç”¨å—ä¿¡ä»»çš„ X11 è½¬å‘ã€‚å—ä¿¡ä»»çš„ X11 è½¬å‘ä¸å— X11 å®‰å…¨æ‰©å±•æ§åˆ¶çš„çº¦æŸ-y ä½¿ç”¨ syslog(3) ç³»ç»Ÿæ¨¡å—å‘é€æ—¥å¿—ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤ä¿¡æ¯è¢«å‘é€åˆ° stderr å…å¯†ç™»å½•/SSHå¯†é’¥ç™»å½• åœ¨å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§é’¥ 1ssh-keygen ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨ å¦‚æœæ˜¯Linux &amp; Unixç³»ç»Ÿï¼Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼š 1ssh-copy-id -i ~/.ssh/id_rsa.pub user@hosts å¦‚æœæ˜¯Windowsç³»ç»Ÿæˆ–è€…æ— ç½‘ç»œç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼š 1cat ~/.ssh/id_rsa.pub | ssh user@host &quot;mkdir ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys &amp;&amp; chmod700 ~/.ssh&quot; [å¯é€‰]ä¿®æ”¹æœåŠ¡å™¨sshd_configé…ç½®æ–‡ä»¶ è¦å…è®¸ä½¿ç”¨å¯†é’¥ï¼ˆå…¬é’¥/ç§é’¥ï¼‰ç™»å½•ï¼Œéœ€è¦ä¿®æ”¹/etc/ssh/sshd_configæ–‡ä»¶ä¸­ä»¥ä¸‹å‡ ä¸ªé…ç½®ï¼š å°†PubkeyAuthenticationè®¾ç½®ä¸ºyesï¼Œè¡¨ç¤ºå¯ç”¨å…¬é’¥è®¤è¯æ–¹å¼ã€‚ å°†AuthorizedKeysFileè®¾ç½®ä¸ºå­˜å‚¨å…¬é’¥çš„è·¯å¾„å’Œæ–‡ä»¶åï¼Œä¾‹å¦‚ï¼šAuthorizedKeysFile ~/.ssh/authorized_keysï¼Œè¡¨ç¤ºå…¬é’¥æ–‡ä»¶å­˜å‚¨åœ¨å½“å‰ç”¨æˆ·çš„.sshç›®å½•ä¸‹çš„authorized_keysæ–‡ä»¶ä¸­ã€‚ å°†PasswordAuthenticationè®¾ç½®ä¸ºnoï¼Œè¡¨ç¤ºç¦ç”¨å¯†ç è®¤è¯æ–¹å¼ï¼Œåªå…è®¸ä½¿ç”¨å…¬é’¥è®¤è¯æ–¹å¼ç™»å½•ã€‚è¿™æ ·å¯ä»¥å¢åŠ ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚ è¦ç¦ç”¨SSHå¯†é’¥èº«ä»½éªŒè¯ï¼Œåªéœ€å°†/etc/ssh/sshd_configæ–‡ä»¶ä¸­çš„PasswordAuthenticationï¼ŒChallengeResponseAuthenticationï¼ŒUsePAMæŒ‡ä»¤æ”¹ä¸ºnoã€‚ å¯¹æœ¬åœ°id_rsaå¯†é’¥è®¾ç½®å¯†ç  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤å¯¹æœ¬åœ°å·²æœ‰çš„id_rsaå¯†é’¥è¿›è¡ŒåŠ å¯†: 1ssh-keygen -p -f ~/.ssh/id_rsa å‘½ä»¤ä¸­çš„-på‚æ•°è¡¨ç¤ºä¿®æ”¹å¯†ç ï¼Œ-få‚æ•°æŒ‡å®šè¦ä¿®æ”¹å¯†ç çš„å¯†é’¥æ–‡ä»¶ã€‚å®Œæˆåï¼Œid_rsa å¯†é’¥æ–‡ä»¶å°±è¢«åŠ å¯†äº†ã€‚ä¸‹æ¬¡ä½¿ç”¨è¯¥å¯†é’¥æ—¶ï¼Œéœ€è¦è¾“å…¥å¯†ç æ‰èƒ½ä½¿ç”¨ã€‚ å¦‚æœæƒ³è¦å»é™¤æœ¬åœ°id_rsaå¯†é’¥çš„å¯†ç ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1ssh-keygen -p -f ~/.ssh/id_rsa -P &lt;old_password&gt; -N &quot;&quot; å‘½ä»¤ä¸­çš„-på‚æ•°è¡¨ç¤ºä¿®æ”¹å¯†ç ï¼Œ-få‚æ•°æŒ‡å®šè¦ä¿®æ”¹å¯†ç çš„å¯†é’¥æ–‡ä»¶ï¼Œ-På‚æ•°æŒ‡å®šåŸæ¥çš„å¯†ç ï¼Œ-Nå‚æ•°æŒ‡å®šæ–°çš„å¯†ç ã€‚åœ¨è¿™ä¸ªå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬å°†æ–°å¯†ç è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±ç›¸å½“äºå»é™¤äº†åŸæ¥çš„å¯†ç ã€‚å®Œæˆåï¼Œid_rsa å¯†é’¥æ–‡ä»¶å°±è¢«å»é™¤äº†å¯†ç ã€‚ä¸‹æ¬¡ä½¿ç”¨è¯¥å¯†é’¥æ—¶ï¼Œæ— éœ€è¾“å…¥å¯†ç å³å¯ä½¿ç”¨ã€‚ Key Erroré”®å…¥ä¸‹åˆ—å‘½ä»¤ä»¥æ¸…é™¤å¯†é’¥ä¿¡æ¯ï¼š 1ssh-keygen -R [ip_address]","link":"/2023/11/17/SSH/"},{"title":"UbuntuåŸºç¡€çŸ¥è¯†","text":"æœ¬æ–‡ç®€å•è®°å½•ç¬”è€…åœ¨Ubuntuç³»ç»Ÿå®‰è£…å’Œåˆå§‹åŒ–æ—¶è¿›è¡Œçš„æ“ä½œã€‚ ç³»ç»Ÿå®‰è£… Throughé•œåƒ ä¸‹è½½å®˜æ–¹é•œåƒï¼Œåˆ¶ä½œæˆå¯åŠ¨ç›˜ æ ¼å¼åŒ–ä¸€å—ç¡¬ç›˜åˆ†åŒºï¼Œå†æŒ‰ä¸‹é¢çš„æ–¹å¼åˆ’åˆ†ç³»ç»Ÿåˆ†åŒº (æœ€ç®€) swap é€»è¾‘åˆ†åŒº ç”µè„‘å†…å­˜1-2å€ï¼ˆæˆ‘çš„æ˜¯16GBå†…å­˜ï¼Œæ‰€ä»¥è®¾ç½®ä¸º16GBï¼‰ / é€»è¾‘åˆ†åŒºæˆ–ä¸»åˆ†åŒº Ext4æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ ä½™ä¸‹ç©ºé—´ /home å¯ä»¥è€ƒè™‘ç»™ç”¨æˆ·æ–‡ä»¶å¤¹å•ç‹¬ä¸€ä¸ªåˆ†åŒº åˆ’åˆ†å¥½åˆ†åŒºåï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æŒ‚è½½ç‚¹ä¸ºâ€œ/â€çš„é‚£ä¸€è¡Œï¼Œå‰é¢è®¾å¤‡é‚£ä¸€åˆ—æ˜¾ç¤ºåº”è¯¥æ˜¯/dev/sdaX,Xæ˜¯ä¸€ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—ï¼Œå…·ä½“æ˜¯å‡ æ¯ä¸ªäººä¸ä¸€æ ·ï¼Œè¡¨ç¤ºçš„æ˜¯ä½ çš„/åˆ†åŒºæŒ‰åœ¨ç¡¬ç›˜çš„ç¬¬å‡ å—ä½ç½®ï¼Œè®°ä½/è¿™ä¸ªåˆ†åŒºçš„sdaåé¢æ˜¯ä»€ä¹ˆæ•°å­—ï¼Œç„¶ååœ¨ä¸‹é¢å®‰è£…å¯åŠ¨å¼•å¯¼å™¨è®¾å¤‡ï¼šå¤„ï¼Œé€‰æ‹©sdaXï¼ˆXæ˜¯ä¸€ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—ï¼‰çš„é‚£ä¸€é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å°†å¯åŠ¨å¼•å¯¼å™¨å®‰è£…åœ¨/åˆ†åŒºä¸­ã€‚ Throughè™šæ‹Ÿæœº å¾…è¡¥å……â€¦ ubuntuå¯åŠ¨å¼•å¯¼ ç¼–è¾‘grubé…ç½®æ–‡ä»¶ï¼šsudo vim /etc/default/grub æ³¨é‡Šæ‰ï¼šGRUB_TIMEOUT_STYLE=hidden ä¿®æ”¹grubç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼šGRUB_TIMEOUT=10 ç¼–è¾‘ï¼šGRUB_CMDLINE_LINUX_DEFAULT=â€textâ€ ä¿®æ”¹é»˜è®¤å¯åŠ¨é¡¹ 12GRUB_DEFAULT = saved # ä¸Šä¸€æ¬¡å¯åŠ¨çš„é€‰æ‹©é¡¹GRUB_DEFAULT= 2 # è¿™ä¸ªæ˜¯é€‰æ‹©ç¬¬ä¸‰é¡¹ï¼šWindows æ‰§è¡Œsudo update-grubå‘½ä»¤åº”ç”¨ä¿®æ”¹ Windowsã€UbuntuåŒç³»ç»Ÿæ—¶å·®ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ 1timedatectl set-local-rtc 1 --adjust-system-clock issueswifiæ— æ³•è¿æ¥è§£å†³æ–¹æ¡ˆæœç´¢ä¸åˆ°é™„è¿‘çš„wifiçƒ­ç‚¹ï¼ŒåŸå› æ˜¯ubuntué»˜è®¤å…³é—­äº†è”æƒ³Y7000çš„wifiç¡¬ä»¶ï¼Œå³ç¡¬é˜»å¡æ˜¾ç¤ºæ— çº¿å’Œè“ç‰™çŠ¶æ€ï¼Œå¯æŸ¥çœ‹çŠ¶æ€ï¼š rfkill list all æ‰“å¼€æ–‡ä»¶ï¼š sudo gedit /etc/modprobe.d/blacklist.conf æœ€åä¸€è¡ŒåŠ å…¥ï¼š blacklist ideapad_laptop æœ€åä¿å­˜é‡å¯ æ–°å»ºç”¨æˆ·å¹¶æ·»åŠ sudoæƒé™ å¦‚æœæ²¡æœ‰rootç”¨æˆ· 1sudo passwd root æ–°å»ºç”¨æˆ· 123456# æ–°å»ºè´¦å·å¹¶è‡ªåŠ¨å»ºç«‹ç”¨æˆ·ç›®å½•sudo useradd -r -m -s /bin/bash username# ä¸ºç”¨æˆ·usernameæ·»åŠ sudoæƒé™sudo usermod -a -G sudo username# å»é™¤ç”¨æˆ·usernameçš„sudoæƒé™sudo usermod -G usergroup username æ—¶é—´åŒæ­¥ ä½¿ç”¨dateæˆ–timedatectlç¡®è®¤å½“å‰æ—¶é—´ å¦‚æœçœ‹åˆ°System clock synchronizedå€¼ä¸ºnoï¼Œåˆ™é‡å¯è¯¥æœåŠ¡ 1sudo systemctl restart systemd-timesyncd.service å¦‚æœä»ç„¶ä¸èµ·ä½œç”¨ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¯ç”¨æ—¶é—´åŒæ­¥ï¼š 1sudo timedatectl set-ntp true å¦‚æœéCSTï¼ˆä¸­å›½æ ‡å‡†æ—¶é—´ï¼‰ï¼Œåˆ™æ›´æ”¹æ—¶åŒº 1sudo timedatectl set-timezone Asia/Shanghai ca-certificateå¤±æ•ˆæ‰‹åŠ¨ä¸‹è½½æœ€æ–°çš„è¯ä¹¦æ–‡ä»¶é‡æ–°å®‰è£… 123cd /tmpwget http://archive.ubuntu.com/ubuntu/pool/main/c/ca-certificates/ca-certificates_20230311ubuntu0.20.04.1_all.debsudo dpkg -i ./ca-certificates_20230311ubuntu0.20.04.1_all.deb æ›¿æ¢aptæº ä½¿ç”¨cat /etc/os-releaseæˆ–lsb_release -cå‘½ä»¤ç¡®è®¤å½“å‰ubuntuç³»ç»Ÿä»£å·Codename å¤‡ä»½è½¯ä»¶æºé…ç½®æ–‡ä»¶ 1sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak æ‹·è´ï¼Œæ³¨æ„æ›¿æ¢ç³»ç»Ÿä»£å·ã€‚ æ¸…åå¤§å­¦å¼€æºé•œåƒç«™ ä¸­ç§‘å¤§å¼€æºé•œåƒç«™ 1234567891011121314151617# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Šdeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse# # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiversedeb http://security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse# deb-src http://security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse# é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse# # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse æ›´æ–° 123sudo apt updatesudo apt upgrade -y --fix-missingsudo apt install -y --fix-missing å­—ä½“ consolas Fira Code","link":"/2023/11/14/Ubuntu%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"title":"Ubuntuå®‰è£…Nginx","text":"Nginx æ˜¯å¼€æºçš„é«˜æ€§èƒ½ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè´Ÿè´£å¤„ç† Internet ä¸Šä¸€äº›æœ€å¤§ç«™ç‚¹çš„è´Ÿè½½ã€‚æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•å®‰è£… Nginx æœåŠ¡ï¼Œä»¥åŠå¦‚ä½•é…ç½®åå‘ä»£ç†ã€SSLåŠ å¯†ç­‰ã€‚ å®‰è£… NginxNginx åœ¨é»˜è®¤çš„ Ubuntu å­˜å‚¨åº“ä¸­å¯ç”¨ã€‚è¦å®‰è£…å®ƒï¼Œè¯·ä½¿ç”¨ apt å‘½ä»¤è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™å°†ä¼šæ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•å¹¶ä¸”å®‰è£… Nginx ã€‚ å®‰è£…å®Œæˆåï¼ŒNginx æœåŠ¡å°†è‡ªåŠ¨å¯åŠ¨ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ systemctl å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„çŠ¶æ€ï¼Œä»è€Œç¡®å®š Nginx æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚ 123sudo apt updatesudo apt install nginxsudo systemctl status nginx é…ç½®åå‘ä»£ç†æ­¥éª¤1ï¼šå®‰è£… Nginxç¡®ä¿å·²åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº† Nginxã€‚ æ­¥éª¤2ï¼šç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ æ‰“å¼€ Nginx çš„é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ä½äº /etc/nginx/nginx.conf æˆ– /etc/nginx/sites-available/defaultã€‚ åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°æˆ–æ·»åŠ ä¸€ä¸ª server æ®µè½ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ã€‚ç¤ºä¾‹ï¼š 123456789101112server { listen 80; server_name example.com; location / { proxy_pass http://your_upstream_server; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # å…¶ä»–å¯èƒ½éœ€è¦çš„é…ç½®é¡¹ }} listen æŒ‡å®š Nginx ç›‘å¬çš„ç«¯å£å·å’Œåè®®ã€‚ server_name æ˜¯ä½ çš„åŸŸåæˆ–æœåŠ¡å™¨çš„ IP åœ°å€ã€‚ location æ˜¯é’ˆå¯¹ç‰¹å®šä½ç½®çš„é…ç½®ã€‚ proxy_pass è®¾ç½®åå‘ä»£ç†ç›®æ ‡çš„åœ°å€ã€‚ proxy_set_header ç”¨äºè®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç¡®ä¿è½¬å‘åå¤´ä¿¡æ¯æ­£ç¡®ä¼ é€’ã€‚ æ ¹æ®å®é™…æƒ…å†µè‡ªå®šä¹‰é…ç½®ï¼Œç¡®ä¿ä»£ç†åœ°å€ã€è¯·æ±‚å¤´è®¾ç½®ç­‰æ­£ç¡®é…ç½®ã€‚ æ­¥éª¤3ï¼šæ£€æŸ¥é…ç½®å¹¶é‡å¯ Nginxä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Nginx é…ç½®æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š 1sudo nginx -t å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‡å¯ Nginx æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo systemctl restart nginx é…ç½® SSL è¯ä¹¦æ­¥éª¤1ï¼šè·å– SSL è¯ä¹¦ä½ å¯ä»¥ä»è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰è´­ä¹° SSL è¯ä¹¦ï¼Œæˆ–è€…ä½¿ç”¨å…è´¹çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆå¦‚ Letâ€™s Encryptï¼‰æ¥è·å–è¯ä¹¦ã€‚ å¦‚æœä½¿ç”¨ Letâ€™s Encrypt ç”³è¯·å…è´¹çš„è¯ä¹¦ï¼Œå¯ä»¥å‚è€ƒæ–‡ç«  Let's Encryptå…è´¹ç”³è¯·SSLè¯ä¹¦ã€‚ æ­¥éª¤2ï¼šå°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ°æœåŠ¡å™¨ä¸Šå°†ä½ çš„ SSL è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶é€šå¸¸æ˜¯ .crt å’Œ .key æ ¼å¼çš„æ–‡ä»¶ã€‚ æ­¥éª¤3ï¼šç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ æ‰“å¼€ Nginx çš„é…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬ä½äº /etc/nginx/nginx.conf æˆ– /etc/nginx/sites-available/defaultã€‚ åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°æœåŠ¡å™¨å—ï¼ˆserverï¼‰ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ä»¥å¯ç”¨ SSLï¼š 123456789server { listen 443 ssl; server_name example.com; ssl_certificate /path/to/your_domain.crt; ssl_certificate_key /path/to/your_private_key.key; # å…¶ä»– SSL é…ç½®é¡¹} listen 443 ssl; æŒ‡å®š Nginx ç›‘å¬ SSL åŠ å¯†çš„ 443 ç«¯å£ã€‚ ssl_certificate æŒ‡å®šä½ çš„ SSL è¯ä¹¦æ–‡ä»¶è·¯å¾„ã€‚ ssl_certificate_key æŒ‡å®šä½ çš„ç§é’¥æ–‡ä»¶è·¯å¾„ã€‚ æ·»åŠ å…¶ä»– SSL é…ç½®ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ SSL åè®®ç‰ˆæœ¬ã€åŠ å¯†å¥—ä»¶ç­‰ã€‚ æ­¥éª¤4ï¼šæ£€æŸ¥é…ç½®å¹¶é‡å¯ Nginxä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Nginx é…ç½®æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š 1sudo nginx -t å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‡å¯ Nginx æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo systemctl restart nginx","link":"/2023/11/28/Ubuntu%E5%AE%89%E8%A3%85Nginx/"},{"title":"Ubuntuå¸¸ç”¨å‘½ä»¤","text":"æœ¬æ–‡è®°å½•ç¬”è€…åœ¨æ—¥å¸¸ä½¿ç”¨Ubuntuæ—¶å¸¸è§çš„å‘½ä»¤ã€‚ æ–‡ä»¶æƒé™ç®¡ç†ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„ç¾¤â€”chgrp12chgrp $group /path/to/change/groupchgrp -R $group /path/to/change/group # æ”¹å˜åŒä¸€ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹ ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…â€”chown12chown $user /path/to/change/groupchown -R $user /path/to/change/group # æ”¹å˜åŒä¸€ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹ æ–‡ä»¶æƒé™â€”chmodLinux chmod å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹ æƒé™ä½å…±æœ‰10ä½ï¼šç¬¬ä¸€ä½æ˜¯æ–‡ä»¶ç±»å‹ï¼Œç¬¬äºŒåˆ°å››ä½æ˜¯æ‰€æœ‰è€…ï¼Œç¬¬äº”åˆ°ä¸ƒä½æ˜¯æ‰€å±ç»„ï¼Œç¬¬å…«åˆ°åä½æ˜¯å…¶ä»–äººã€‚ è‡ªå¯åŠ¨é€šè¿‡rc.localæœåŠ¡ å°† /lib/systemd/system/rc-local.service é“¾æ¥åˆ° /etc/systemd/system/ ç›®å½•ä¸‹é¢æ¥ 1ln -fs /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service ä¿®æ”¹rc-local.serviceæ–‡ä»¶å†…å®¹ 12345sudo echo &quot;[Install]WantedBy=multi-user.targetAlias=rc-local.service&quot; &gt;&gt; etc/systemd/system/rc-local.service åˆ›å»ºå¹¶ç¼–è¾‘/etc/rc.localæ–‡ä»¶ 12sudo touch /etc/rc.localsudo vim /etc/rc.local æŠŠæƒ³å¼€æœºå¯åŠ¨çš„è„šæœ¬æ”¾å…¥ 12#!/bin/bash[æ­¤å¤„ä¸ºè„šæœ¬] é€šè¿‡init.dè„šæœ¬æ–‡ä»¶ ç¼–å†™è„šæœ¬ 1vim test.sh å…ˆæ·»åŠ è„šæœ¬å†…å®¹æŠ¬å¤´ 1234567891011#!/bin/bash### BEGIN INIT INFO# Provides: test# Required-Start: $remote_fs $syslog# Required-Stop: $remote_fs $syslog# Default-Start: 2 3 4 5# Default-Stop: 0 1 6# Short-Description: start test# Description: start test### END INIT INFO ç„¶åå¼€å§‹ç¼–å†™è„šæœ¬å†…å®¹ å°†ç¼–å†™çš„è„šæœ¬æ”¾å…¥/etc/init.d/ 1sudo mv test.sh /etc/init.d/ ç»™æ–‡ä»¶æƒé™ 1chmod +750 test.sh è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ 1sudo update-rc.d test.sh defaults NN NNä¸ºå¯åŠ¨é¡ºåºï¼Œå¦‚æœéœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œåˆ™è®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„æ•°å­—å¦‚99. å¸è½½å¯åŠ¨è„šæœ¬ 12cd /etc/init.dsudo update-rc.d -f test.sh remove ç§»é™¤è½¯ä»¶ 1sudo apt-get --purge remove è½¯ä»¶å ç£ç›˜åˆ†åŒºfdiskå‘½ä»¤è¯¦è§£ï¼š mï¼šè·å–å¸®åŠ© nï¼šæ–°å»ºåˆ†åŒº pï¼šæ˜¾ç¤ºåˆ†åŒºè¡¨ dï¼šåˆ é™¤åˆ†åŒº bï¼šè®¾ç½®å·æ ‡ wï¼šå†™å…¥åˆ†åŒºè¡¨ tï¼šæ”¹å˜åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿç±»å‹ vï¼šæ£€éªŒåˆ†åŒº lï¼šæ˜¾ç¤ºfdiskæ‰€æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä»£ç  qï¼šé€€å‡º æ ¼å¼åŒ–åˆ†åŒº12mkfs -t ext4 /dev/sda1mkfs -t ext4 /dev/sda2 åå°è¿›ç¨‹ç®¡ç† &amp;åŠ åœ¨ä¸€ä¸ªå‘½ä»¤çš„æœ€åï¼Œå¯ä»¥æŠŠè¿™ä¸ªå‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œ ,å¦‚gftp &amp;, ctrl + zå¯ä»¥å°†ä¸€ä¸ªæ­£åœ¨å‰å°æ‰§è¡Œçš„å‘½ä»¤æ”¾åˆ°åå°ï¼Œå¹¶ä¸”å¤„äºæš‚åœçŠ¶æ€ï¼Œä¸å¯æ‰§è¡Œ jobsæŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤jobs -lé€‰é¡¹å¯æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡çš„PIDï¼Œjobsçš„çŠ¶æ€å¯ä»¥æ˜¯running, stopped, Terminated,ä½†æ˜¯å¦‚æœä»»åŠ¡è¢«ç»ˆæ­¢äº†ï¼ˆkillï¼‰ï¼Œshell ä»å½“å‰çš„shellç¯å¢ƒå·²çŸ¥çš„åˆ—è¡¨ä¸­åˆ é™¤ä»»åŠ¡çš„è¿›ç¨‹æ ‡è¯†ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œjobså‘½ä»¤æ˜¾ç¤ºçš„æ˜¯å½“å‰shellç¯å¢ƒä¸­æ‰€èµ·çš„åå°æ­£åœ¨è¿è¡Œæˆ–è€…è¢«æŒ‚èµ·çš„ä»»åŠ¡ä¿¡æ¯ï¼› fgå°†åå°ä¸­çš„å‘½ä»¤è°ƒè‡³å‰å°ç»§ç»­è¿è¡Œå¦‚æœåå°ä¸­æœ‰å¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç”¨ fg %jobnumberå°†é€‰ä¸­çš„å‘½ä»¤è°ƒå‡ºï¼Œ%jobnumberæ˜¯é€šè¿‡jobså‘½ä»¤æŸ¥åˆ°çš„åå°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤çš„åºå·(ä¸æ˜¯pid) bgå°†ä¸€ä¸ªåœ¨åå°æš‚åœçš„å‘½ä»¤ï¼Œå˜æˆç»§ç»­æ‰§è¡Œ ï¼ˆåœ¨åå°æ‰§è¡Œï¼‰å¦‚æœåå°ä¸­æœ‰å¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç”¨bg %jobnumberå°†é€‰ä¸­çš„å‘½ä»¤è°ƒå‡ºï¼Œ%jobnumberæ˜¯é€šè¿‡jobså‘½ä»¤æŸ¥åˆ°çš„åå°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤çš„åºå·(ä¸æ˜¯pid)å°†ä»»åŠ¡è½¬ç§»åˆ°åå°è¿è¡Œï¼šå…ˆctrl + zï¼›å†bgï¼Œè¿™æ ·è¿›ç¨‹å°±è¢«ç§»åˆ°åå°è¿è¡Œï¼Œç»ˆç«¯è¿˜èƒ½ç»§ç»­æ¥å—å‘½ä»¤ã€‚ ctrl+zï¼ˆæŒ‚èµ·ï¼‰ã€ctrl+cï¼ˆä¸­æ–­ï¼‰ã€ctrl+\\ï¼ˆé€€å‡ºï¼‰å’Œctrl+dï¼ˆEOFï¼‰çš„åŒºåˆ«ctrl+cå¼ºè¡Œä¸­æ–­å½“å‰ç¨‹åºçš„æ‰§è¡Œã€‚ ctrl+zå°†ä»»åŠ¡ä¸­æ–­,ä½†æ˜¯æ­¤ä»»åŠ¡å¹¶æ²¡æœ‰ç»“æŸ,ä»–ä»ç„¶åœ¨è¿›ç¨‹ä¸­ï¼Œåªæ˜¯æ”¾åˆ°åå°å¹¶ç»´æŒæŒ‚èµ·çš„çŠ¶æ€ã€‚å¦‚éœ€å…¶åœ¨åå°ç»§ç»­è¿è¡Œï¼Œéœ€ç”¨â€œbg è¿›ç¨‹å·â€ä½¿å…¶ç»§ç»­è¿è¡Œï¼›å†ç”¨â€fg è¿›ç¨‹å·â€å¯å°†åå°è¿›ç¨‹å‰å°åŒ–ã€‚ ctrl+\\è¡¨ç¤ºé€€å‡ºã€‚ ctrl+dè¡¨ç¤ºç»“æŸå½“å‰è¾“å…¥ï¼ˆå³ç”¨æˆ·ä¸å†ç»™å½“å‰ç¨‹åºå‘å‡ºæŒ‡ä»¤ï¼‰ï¼Œé‚£ä¹ˆLinuxé€šå¸¸å°†ç»“æŸå½“å‰ç¨‹åºã€‚ æ¸…ç†ç©ºé—´to Serveråœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ncdu 123sudo apt-get install ncdu# ä»¥æ¸…ç†æ—¥å¿—æ–‡ä»¶ä¸ºä¾‹sudo ncdu /var/log to Clientåœ¨æ¡Œé¢ç‰ˆæœ¬ç”¨å›¾å½¢åŒ–çš„baobabå·¥å…·ã€‚ 1sudo apt-get install baobab å‹ç¼©è§£å‹1234# å‹ç¼©tar -zcvf xx.tar.gz &lt;target folder&gt;/# è§£å‹tar -zxvf xx.tar.gz &lt;destination folder&gt; ç£ç›˜æ“ä½œæŒ‚è½½ç£ç›˜ æŸ¥çœ‹ç¡¬ç›˜UUID 1sudo blkid åˆ›å»ºæŒ‚è½½ç‚¹ 1sudo mkdir /mnt/xxx æŒ‚è½½ 1mount /dev/xxx /mnt/xxx å¼€æœºè‡ªåŠ¨æŒ‚è½½ 123456# ä¿®æ”¹/etc/fstabæ–‡ä»¶å†…å®¹sudo vim /etc/fstab# æ·»åŠ åˆ°æ–‡ä»¶UUID=XXX-XXX-XXX /mnt/xx ext4 defaults 0 2# æŒ‚è½½NTFSæ–‡ä»¶ç³»ç»ŸUUID= /mnt/xxx ntfs defaults 0 2","link":"/2023/11/14/Ubuntu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"},{"title":"WSL2å¼€å‘ç¯å¢ƒ","text":"æœ¬æ–‡è®°å½•äº†ç¬”è€…åœ¨WSL2ä¸­é…ç½®æ·±åº¦å­¦ä¹ å¼€å‘ç¯å¢ƒçš„ä¸»è¦æ­¥éª¤ã€‚ åˆå§‹åŒ–WSL2ç¯å¢ƒå…·ä½“å®ç°è¿‡ç¨‹å‚è€ƒ UbuntuåŸºç¡€çŸ¥è¯† éƒ¨åˆ†ã€‚ å®‰è£…è¿œç¨‹æ¡Œé¢ç¯å¢ƒå…·ä½“å®ç°è¿‡ç¨‹å‚è€ƒ Linuxå®ç°è¿œç¨‹æ¡Œé¢ç¯å¢ƒã€‚ é…ç½®å½“å‰ç”¨æˆ·æ‰§è¡Œsudoå‘½ä»¤å…å¯† ç”±äºå¯åŠ¨xrdpæœåŠ¡éœ€è¦ç”¨åˆ°sudoæƒé™ï¼Œä¼šå‡ºç°è¾“å…¥å¯†ç çš„æç¤ºï¼Œè¾ƒä¸ºéº»çƒ¦ åˆ›å»ºé…ç½®æ–‡ä»¶ 1sudo vim /etc/sudoers.d/[USERNAME] ç¼–è¾‘å¦‚ä¸‹å†…å®¹ 1[USERNAME] ALL=(ALL) NOPASSWORD: ALL åˆ›å»ºä¸€é”®å¯åŠ¨è„šæœ¬12mkdir ~/.local/bin -pvim ~/.local/bin/remote.sh æ–‡ä»¶æœ«å°¾è¿½åŠ ä¸‹é¢ä¸¤è¡Œå†…å®¹ 123sudo /etc/init.d/xrdp startsleep 1mstsc.exe /v:localhost:[PORT] ç»™è„šæœ¬åŠ ä¸Šå¯æ‰§è¡Œæƒé™ 1chmod +x ~/.local/bin/remote.sh åœ¨windowsæ¡Œé¢æ–°å»ºä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œå¯¹è±¡ä½ç½®å†…å®¹å¡«å†™: 1wsl ~/.local/bin/remote.sh åŒå‡»å¿«æ·æ–¹å¼å³å¯å®ç°ä¸€é”®å¯åŠ¨ç™»å½•wsl2è¿œç¨‹æ¡Œé¢ CUDA on WSL2è¿˜æ²¡æœ‰å¼€å§‹ç ”ç©¶è¿‡ï¼Œå¯å‚è€ƒå¦‚ä¸‹æ–‡ç« : CUDA on WSL User Guide Enabling GPU acceleration on Ubuntu on WSL2 with the NVIDIA CUDA Platform","link":"/2023/11/17/WSL2%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"title":"Let&#39;s Encryptå…è´¹ç”³è¯·SSLè¯ä¹¦","text":"Letâ€™s Encrypt æ˜¯å…è´¹ã€å¼€æ”¾å’Œè‡ªåŠ¨åŒ–çš„è¯ä¹¦é¢å‘æœºæ„ (CA)ã€‚æˆ‘ä»¬å¯ä»¥ä» Letâ€™s Encrypt è·å¾—ç½‘ç«™åŸŸåçš„å…è´¹çš„è¯ä¹¦ã€‚ ä½¿ç”¨ certbot ç”³è¯· SSL è¯ä¹¦Certbot æ˜¯ Letâ€™s Encrypt å®˜æ–¹æ¨èçš„è·å–è¯ä¹¦çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è·å–å…è´¹çš„ Letâ€™s Encrypt è¯ä¹¦ã€‚Certbot æ”¯æŒæ‰€æœ‰ Unix å†…æ ¸çš„æ“ä½œç³»ç»Ÿã€‚ å®‰è£… certbotCertbot å®˜æ–¹æ¨èä½¿ç”¨ snap å®‰è£…ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ yum æˆ–è€… dnfã€‚ å®‰è£… snapd Snap å·²ç»é¢„è£…åœ¨ Ubuntu 16.04 (Xenial Xerus) åŠæ›´æ–°å‘è¡Œç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨æ—§ç‰ˆï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£… snap :) 12sudo apt update sudo apt install snapd æ›´å¤š OS å®‰è£…è¯·å‚è€ƒæ–‡æ¡£ã€‚ ç§»é™¤æ—§ç‰ˆ å¦‚æœæ­¤å‰ä½¿ç”¨è¿‡å…¶ä»–åŒ…ç®¡ç†å·¥å…·è¿›è¡Œå®‰è£… certbotï¼Œæ¨èåœ¨å®‰è£…å‰ç§»é™¤: 123456# aptsudo apt-get remove certbot# dnfsudo dnf remove certbot# yumsudo yum remove certbot å®‰è£… åœ¨å‘½ä»¤è¡Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… 1sudo snap install --classic certbot å‡†å¤‡ certbot å‘½ä»¤ åˆ›å»ºè½¯é“¾ä»¥ä¾¿åœ¨ç»ˆç«¯å¿«æ·ä½¿ç”¨ certbot å‘½ä»¤: 1sudo ln -s /snap/bin/certbot /usr/bin/certbot è¿è¡Œ æ¥ä¸‹æ¥ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ certbot æ¥è·å–è¯ä¹¦ï¼Œæˆ–è€…å¯¹è¯ä¹¦è¿›è¡Œç»­çº¦ã€‚å…·ä½“ç»†èŠ‚è¯·å‚è€ƒæ–‡æ¡£ã€‚ ç”³è¯·æ³›åŸŸå SSL è¯ä¹¦ä»¥åŠé…ç½®è‡ªåŠ¨ç»­çº¦ä¸ç®¡æ˜¯ç”³è¯·è¿˜æ˜¯ç»­æœŸï¼Œåªè¦æ˜¯é€šé…ç¬¦è¯ä¹¦ï¼Œåªèƒ½é‡‡ç”¨ dns-01 çš„æ–¹å¼æ ¡éªŒç”³è¯·è€…çš„åŸŸåï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡ç»­æœŸè¯ä¹¦æˆ‘ä»¬éƒ½å¿…é¡»ç™»å½•æ§åˆ¶å°æ·»åŠ å¯¹åº”çš„ TXT è®°å½•æ‰å¯ä»¥ç»­æœŸ/ç”³è¯·æˆåŠŸï¼Œè¿™æ ·ä¸å…æœ‰äº›éº»çƒ¦ã€‚å¥½åœ¨ certbot æä¾›äº†ä¸€ä¸ª hookï¼Œå¯ä»¥è°ƒç”¨åŸŸåæä¾›å•†çš„ API æ¥å£æ¥æ·»åŠ  TXT è®°å½•è€Œæ— éœ€äººå·¥å¹²é¢„ï¼Œä½†æ˜¯å®˜æ–¹å¹¶ä¸æ”¯æŒå›½å†…çš„å¤§éƒ¨åˆ†æœåŠ¡å•†ï¼Œè¿™æ ·å°±è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹çš„æ’ä»¶äº†ã€‚æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ certbot-letencrypt-wildcardcertificates-alydns-auï¼Œæœ¬æ–‡ä»…ç®€å•ä»‹ç»ï¼Œæ›´å¤šç»†èŠ‚è¯·å‚è€ƒé¡¹ç›®æ–‡æ¡£ã€‚ ä¸‹è½½ 123git clone https://github.com/ywdblog/certbot-letencrypt-wildcardcertificates-alydns-aucd certbot-letencrypt-wildcardcertificates-alydns-auchmod 0777 au.sh é…ç½® ï¼ˆ1ï¼‰ domain.ini å¦‚æœ domain.ini æ–‡ä»¶æ²¡æœ‰ä½ çš„æ ¹åŸŸåï¼Œè¯·è‡ªè¡Œæ·»åŠ ã€‚ ï¼ˆ2ï¼‰ au.sh ç™»å½•åŸŸåæœåŠ¡å•†çš„æ§åˆ¶å°è·å– API å¯†é’¥ï¼Œç„¶åé…ç½®åœ¨ au.sh æ–‡ä»¶ä¸­ã€‚ ALY_KEY å’Œ ALY_TOKENï¼šé˜¿é‡Œäº‘ API key å’Œ Secrec å®˜æ–¹ç”³è¯·æ–‡æ¡£ TXY_KEY å’Œ TXY_TOKENï¼šè…¾è®¯äº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ HWY_KEY å’Œ HWY_TOKEN: åä¸ºäº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ GODADDY_KEY å’Œ GODADDY_TOKENï¼šGoDaddy API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ ç”³è¯·è¯ä¹¦ é¦–å…ˆæˆ‘ä»¬æµ‹è¯•æ˜¯å¦æœ‰è¯¯ï¼š 123456sudo certbot certonly \\-d *.example.com \\--manual --preferred-challenges dns \\--dry-run \\--manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; \\--manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot; æ³¨æ„ï¼š â€“manual-auth-hook å’Œ â€“manual-cleanup-hook æœ‰ä¸‰ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªä»£è¡¨ä½ è¦é€‰æ‹©é‚£ç§è¯­è¨€(php/python) ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨ä½ çš„DNSå‚å•†(aly/txy) ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›ºå®šçš„(â€“manual-auth-hookä¸­ç”¨addï¼Œâ€“manual-clean-hookä¸­ç”¨clean) æ¯”å¦‚ä½ è¦é€‰æ‹©Pythonç¯å¢ƒï¼Œå¯ä»¥å°† â€“manual-auth-hook è¾“å…¥ä¿®æ”¹ä¸º â€œ/è„šæœ¬ç›®å½•/au.sh python aly addâ€ï¼Œâ€“manual-cleanup-hook è¾“å…¥ä¿®æ”¹ä¸º â€œ/è„šæœ¬ç›®å½•/au.sh python aly cleanâ€ ç¡®è®¤æ— è¯¯åï¼Œå®é™…è¿è¡Œï¼ˆå»é™¤ â€“dry-run å‚æ•°ï¼‰ï¼š 12345sudo certbot certonly \\-d *.example.com \\--manual --preferred-challenges dns \\--manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; \\--manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot; å‚æ•°è§£é‡Š: certonlyï¼šè¡¨ç¤ºé‡‡ç”¨éªŒè¯æ¨¡å¼ï¼Œåªä¼šè·å–è¯ä¹¦ï¼Œä¸ä¼šä¸º web æœåŠ¡å™¨é…ç½®è¯ä¹¦ --manualï¼šè¡¨ç¤ºæ’ä»¶ --preferred-challenges dnsï¼šè¡¨ç¤ºé‡‡ç”¨ DNS éªŒè¯ç”³è¯·è€…åˆæ³•æ€§ï¼ˆæ˜¯ä¸æ˜¯åŸŸåçš„ç®¡ç†è€…ï¼‰ --dry-runï¼šåœ¨å®é™…ç”³è¯·/æ›´æ–°è¯ä¹¦å‰è¿›è¡Œæµ‹è¯•ï¼Œå¼ºçƒˆæ¨è -dï¼šè¡¨ç¤ºéœ€è¦ä¸ºé‚£ä¸ªåŸŸåç”³è¯·è¯ä¹¦ï¼Œå¯ä»¥æœ‰å¤šä¸ªã€‚ --manual-auth-hookï¼šåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™è°ƒç”¨ä¸€ä¸ª hook æ–‡ä»¶ --manual-cleanup-hookï¼šæ¸…é™¤ DNS æ·»åŠ çš„è®°å½• ç»­çº¦ æ‰‹åŠ¨ç»­çº¦ 1sudo certbot renew è‡ªåŠ¨ç»­çº¦ 12345678# ç¼–è¾‘æ–‡ä»¶vim /etc/crontabæˆ–é…ç½®äº†crontabç¼–è¾‘å™¨çš„æƒ…å†µä¸‹crontab -e# å¡«å…¥ä»¥ä¸‹å†…å®¹1 1 */1 * * sudo certbot renew --manual --preferred-challenges dns --deploy-hook &quot;service nginx restart&quot; --manual-auth-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly add&quot; --manual-cleanup-hook &quot;/è„šæœ¬ç›®å½•/au.sh php aly clean&quot;# æ³¨æ„åªæœ‰æˆåŠŸrenewè¯ä¹¦ï¼Œæ‰ä¼šé‡æ–°å¯åŠ¨nginx","link":"/2023/12/01/%E5%85%8D%E8%B4%B9%E7%94%B3%E8%AF%B7SSL%E8%AF%81%E4%B9%A6/"},{"title":"å†…ç½‘ç©¿é€","text":"æœ¬æ–‡ç®€å•ä»‹ç»å†…ç½‘ç©¿é€çš„å‡ ç§æ–¹å¼ã€‚ æ ¹æ®ç½‘ç»œæƒ…å†µâ€”æœ‰æ— å…¬ç½‘ipâ€”é€‰æ‹©é€‚åˆè‡ªå·±çš„å†…ç½‘ç©¿é€æ–¹æ³•ã€‚æœ‰å…¬ç½‘ipçš„å»ºè®®ç›´æ¥DDNSï¼Œæ— å…¬ç½‘ipå¯é€‰æ‹©ä»¥ä¸‹æ–¹å¼: ZeroTier VPS + FRP VPS + WireGuard ZeroTieråˆ›å»ºè™šæ‹Ÿç½‘æ®µ ç™»å½•ZeroTierå®˜ç½‘åˆ›å»ºä¸€ä¸ªç½‘ç»œï¼Œå¹¶é€‰æ‹©è·¯ç”±è¡¨ã€‚ åœ¨éœ€è¦å†…ç½‘ç©¿é€çš„ç»ˆç«¯ä¸Šå®‰è£…zerotierå®¢æˆ·ç«¯å¹¶ä½¿ç”¨Network IDåŠ å…¥å·²åˆ›å»ºçš„ç½‘ç»œã€‚ åœ¨ZTå®˜ç½‘è®¤è¯è®¾å¤‡ã€‚ åœ¨ZTå®˜ç½‘é…ç½®NAT: 192.168.x.0/24 via [Managed IP of OpenWrt]ã€‚ OpenWrtæ¡¥æ¥ç‰©ç†å±€åŸŸç½‘ å°†OpenWrtåŠ å…¥ZeroTierè™šæ‹Ÿç½‘æ®µ åœ¨OpenWrtçš„ZeroTierå®¢æˆ·ç«¯é…ç½®è‡ªåŠ¨å…è®¸å®¢æˆ·ç«¯NAT é…ç½®é˜²ç«å¢™ï¼Œä½ç½®Openwrté˜²ç«å¢™â†’é€šä¿¡è§„åˆ™â†’æ·»åŠ æ–°è§„åˆ™ 12345åç§°: Allow-ZeroTier-Inboundåè®®: UDPæºåŒºåŸŸ: ä»»æ„åŒºåŸŸï¼ˆè½¬å‘ï¼‰ç›®æ ‡åŒºåŸŸ: è®¾å¤‡ï¼ˆè¾“å…¥ï¼‰ç›®æ ‡ç«¯å£: 9993 åœ¨OpenWrtâ†’ç½‘ç»œâ†’æ¥å£æ·»åŠ æ–°æ¥å£ï¼š 1231. åç§°ZeroTier2. åè®®é€‰æ‹©ä¸é…ç½®åè®®3. è®¾å¤‡é€‰&quot;ä»¥å¤ªç½‘é€‚é…å™¨ztxxxxx&quot;(æ­¤å¤„ztxxxxç”±ZeroTierå®¢æˆ·ç«¯è‡ªåŠ¨åˆ›å»ºçš„è™šæ‹Ÿæ¥å£) åœ¨OpenWrtâ†’ç½‘ç»œâ†’é˜²ç«å¢™çš„åŒºåŸŸåˆ—è¡¨ä¸­æ–°å¢ï¼š 12345678åç§°: ztvpnå…¥ç«™æ•°æ®: æ¥å—å‡ºç«™æ•°æ®: æ¥å—è½¬å‘: æ¥å—ipåŠ¨æ€ä¼ªè£…: âœ”æ¶µç›–ç½‘ç»œ: ZeroTierå…è®¸è½¬å‘åˆ°ç›®æ ‡åŒºåŸŸ: é€‰æ‹©lanå…è®¸æ¥è‡ªæºåŒºåŸŸçš„è½¬å‘: é€‰æ‹©lan","link":"/2023/11/21/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"},{"title":"æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®","text":"æœ¬æ–‡è®°å½•äº†ç¬”è€…åœ¨é…ç½®æ·±åº¦å­¦ä¹ ç¯å¢ƒæ—¶çš„ä¸»è¦æ­¥éª¤ã€‚ OSInstall UbuntuRefer to UbuntuåŸºç¡€çŸ¥è¯†. ProxyTerminal proxy Setup Nvidia driver &amp; cuda &amp; cudnn on linux systemOnly valid for Debian/Ubuntu system. Other Linux distribution is continued... Ná OTE that the secure boot must be disable and the &quot;Driver&quot; must be disabled during the installation. DownloadFirst we should check the right version between Nvidia driver and CUDA Toolkit via https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-major-component-versions__table-cuda-toolkit-driver-versions official url for Nvidia driver: https://www.nvidia.cn/Download/index.aspx?lang=cn official url for CUDA Toolkit: https://developer.nvidia.com/cuda-toolkit-archive official url for cuDNN: https://developer.nvidia.com/rdp/cudnn-download CleanStart terminal and remove any NVIDIA traces you may have on your machine. 123456789# ---clean nvidia-------------sudo apt-get purge nvidia*sudo apt remove nvidia-* libnvidia*# ----------------------------# if you installed nvidia-docker and only want to uninstall nvidia driver, you can use the following commandsudo /usr/bin/nvidia-uninstall# ---clean cuda---------------sudo /usr/local/cuda-xx.x/bin/cuda-uninstallersudo rm -rf /usr/local/cuda-xx.x Disable the inner nouveau nvidia driver, 123456789101112# run the command to new/edit a filesudo vim /etc/modprobe.d/blacklist.conf# add following lines to above fileblacklist nouveauoptions nouveau modeset=0# using following command to update the kernelsudo update-initramfs -u# reboot and check the driver modulelsmod | grep nouveau InstallSetup the correct CUDA PPA on your system 12345sudo add-apt-repository ppa:graphics-driverssudo apt updatesudo service gdm3 stop # or lightdm, kdm. Use 'cat /etc/X11/default-display-manager' command to check which display manager is used.sudo apt-get install dkms build-essential linux-headers-generic # install essential packages to build kernel modulesudo apt-get install linux-headers-$(uname -r) Install dirver, cuda and cudnn 1234567891011# First navigate to the folder where the nvidia driver is saved.# install driversudo sh NVIDIA-Linux-x86_64-470.63.01.run -no-opengl-files -no-x-check -no-nouveau-check# install cuda, note that don't select Driversudo sh cuda_11.1.1_455.32.00_linux.run# install cudnntar -xzvf cudnn-11.2-linux-x64-v8.1.1.33.tgzsudo cp cuda/lib64/* /usr/local/cuda-11.1/lib64/sudo cp cuda/include/* /usr/local/cuda-11.1/include/ As the last step one need to specify PATH to CUDA in â€˜.bashrcâ€™ file. Open the file by running: 1vim ~/.bashrc And add the following lines at the end of the file: 123export CUDA_HOME=/usr/local/cuda-xx.xexport LD_LIBRARY_PATH=${CUDA_HOME}/lib64export PATH=${CUDA_HOME}/bin:${PATH} Restart and check the versions for the installation. NVIDIA driver: 1nvidia-smi CUDA: 1nvcc -V cuDNN: 123/sbin/ldconfig -N -v $(sed â€˜s/:/ /â€™ &lt;&lt;&lt; $LD_LIBRARY_PATH) 2&gt;/dev/null | grep libcudnn# orcat /usr/local/cuda/include/cudnn_version.h | grep CUDNN_MAJOR -A 2 Start display manager. 1sudo service gdm3 start Setup remote desktopAfter updates, run below command to install XRDP on your server 1sudo apt-get install xrdp Step 1: Install your preferred desktop environmentTo install XFCE, please use below command 123sudo apt-get install xfce4# optionalsudo apt-get install xfce4-terminal After installation, configure XRDP to use XFCE environment with below commandï¼ˆmay be unnecessary, need to testï¼‰ 1sudo sed -i.bak '/fi/a #xrdp multiple users configuration \\n xfce-session \\n' /etc/xrdp/startwm.sh By default Xrdp uses the /etc/ssl/private/ssl-cert-snakeoil.key file which is readable only by users that are members of the â€œssl-certâ€ group. Execute thefollowing command to add the xrdp user to the group 1sudo adduser xrdp ssl-cert Step 2: Allow RDP port in FirewallPost configuring, To connect with the RDP session you need to allow the port in firewall which by default is closed. Run the below command to open the port in Ubuntu 18.04 If you have enabled UFW, Use below command 123456# optional, å¦‚æœæ²¡æœ‰ufwå‘½ä»¤è¯·å®‰è£…sudo apt-get install ufw# ---------------------------------sudo ufw allow 3389/tcp# æˆ–è€…å…³é—­é˜²ç«å¢™sudo ufw disable (Optional) If Iptables is running on your server, Use below command 123sudo iptables -A INPUT -p tcp --dport 3389 -j ACCEPTsudo netfilter-persistent savesudo netfilter-persistent reload Step 3: Restart the Xrdp applicationRestart once the Xrdp application to make sure all the above changes are reflected. 1sudo systemctl restart xrdp Run the following commands only once the first time you log on the machine 1echo xfce4-session &gt;~/.xsession Step 4: Address the black screen problemedit the startwm.sh file 1234567891011$ sudo vim /etc/xrdp/startwm.sh# append the following code piece before the specific positionunset DBUS_SESSION_BUS_ADDRESSunset XDG_RUNTIME_DIR. $HOME/.profileâ†if test -r /etc/profile; then......fi","link":"/2023/11/14/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"title":"ç»ˆç«¯ä»£ç†","text":"æœ¬æ–‡è®°å½•ç¬”è€…åœ¨é‡åˆ°éœ€è¦å¯¹ç»ˆç«¯å‘½ä»¤ä»£ç†æ—¶æ‰¾åˆ°çš„å‡ ç§è§£å†³æ–¹æ¡ˆã€‚ Windows platformä¸´æ—¶ç”Ÿæ•ˆåœ¨windowsçš„cmdå‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 123456# ä½¿ç”¨socks5ä»£ç†set http_proxy=socks5://127.0.0.1:ç«¯å£å·set https_proxy=socks5://127.0.0.1:ç«¯å£å·# ä½¿ç”¨httpä»£ç†set http_proxy=http://127.0.0.1:ç«¯å£å·set https_proxy=http://127.0.0.1:ç«¯å£å· å–æ¶ˆè®¾ç½® 12set http_proxy=set https_proxy= é•¿æœŸç”Ÿæ•ˆåœ¨æˆ‘çš„ç”µè„‘ -&gt; å±æ€§-&gt; é«˜çº§ç³»ç»Ÿè®¾ç½®-&gt; é«˜çº§-&gt; ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨ ç³»ç»Ÿç¯å¢ƒä¸­ï¼Œæ–°å»ºä¸¤ä¸ªç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå˜é‡åç§°åˆ†åˆ«ä¸º https_proxyå’Œhttp_proxyï¼Œå€¼ä¸º https_proxy=socks5://127.0.0.1:ç«¯å£å· æµ‹è¯•åœ¨cmdå‘½ä»¤è¡Œä½¿ç”¨curl www.google.comï¼Œå¦‚æœæœ‰å†…å®¹è¿”å›ï¼Œè¯´æ˜è®¾ç½®æˆåŠŸï¼ˆä¸å¯ä»¥ç”¨pingå‘½ä»¤æµ‹è¯•ï¼‰ã€‚ å¦‚æœé‡åˆ°æŠ¥é”™ä¿¡æ¯ï¼šcurl : æ— æ³•åˆ†æå“åº”å†…å®¹ï¼Œå› ä¸º Internet Explorer å¼•æ“ä¸å¯ç”¨ï¼Œæˆ–è€… Internet Explorer çš„é¦–æ¬¡å¯åŠ¨é…ç½®ä¸å®Œæ•´ã€‚è¯·æŒ‡å®š UseBasicParsing å‚æ•°ï¼Œç„¶åå†è¯•ä¸€æ¬¡ï¼Œå¯ä»¥å‚è€ƒhttps://www.cnblogs.com/sjfeng1987/p/10000493.html Ubuntu å®‰è£…proxychains 1sudo apt install proxychains é…ç½®proxychains.confæ–‡ä»¶ 1234vim /etc/proxychains.confsocks5 127.0.0.1 1080http 127.0.0.1 1080 åœ¨[ProxyList]è¿™ä¸€è¡Œä¸‹æ·»åŠ socks5 127.0.0.1 1080ï¼Œå¦‚æœæœ‰åˆ«çš„æ¯”å¦‚socks4 127.0.0.1 9050é‚£ä¹ˆå°±æŠŠå®ƒç»™æ³¨é‡Šæ‰ ä½¿ç”¨æ–¹æ³• å¦‚ä½¿ç”¨git cloneï¼š 1proxychains git clone https://github.com/haad/proxychains.git å‚è€ƒ https://www.cnblogs.com/hi-eric/p/11563245.html","link":"/2023/11/14/%E7%BB%88%E7%AB%AF%E4%BB%A3%E7%90%86/"},{"title":"éƒ¨ç½²FRPå®ç°å†…ç½‘ç©¿é€","text":"æœ¬æ–‡ç²—ç•¥è®°å½•äº†é…ç½®FRPçš„è¿‡ç¨‹ã€‚ ä¸‹è½½å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½è¦ä¸‹è½½æ–‡ä»¶ï¼šhttps://github.com/fatedier/frp/releases ç„¶ååœ¨å®¢æˆ·æœºï¼ˆä¹Ÿå°±æ˜¯éœ€è¦è¿›è¡Œå†…ç½‘ç©¿é€çš„æœ¬åœ°æœºï¼‰å’ŒæœåŠ¡å™¨æ‰§è¡Œç›¸åŒæ“ä½œï¼š 123456# è§£å‹tar -xvzf frp_xxx_linux_amd64.tar.gz# ç§»åŠ¨æ–‡ä»¶sudo mv frp_xxx_linux_amd64 /usr/local/frp# è¿›å…¥ç§»åŠ¨åçš„æ–‡ä»¶å¤¹cd /usr/local/frp æœåŠ¡å™¨é…ç½® ç™»å½•åˆ°æœåŠ¡å™¨ç»ˆç«¯ï¼Œä¿®æ”¹frpsé…ç½®æ–‡ä»¶ 12345678# é¦–å…ˆç¡®ä¿å½“å‰å·²ç»åœ¨frpç›®å½•å†…ï¼Œå¦‚æœä¸åœ¨è¯·è¾“å…¥ä¸‹é¢å‘½ä»¤$ cd /usr/local/frp# ä¿®æ”¹frpsé…ç½®æ–‡ä»¶$ sudo vim frps.ini[common]bind_port = 33300 # frpsç›‘å¬ç«¯å£ï¼Œæ ¹æ®éœ€è¦è‡ªè¡Œä¿®æ”¹token = xxxx åœ¨æœåŠ¡å™¨è®¾ç½®ä¸­æ‰¾åˆ°é˜²ç«å¢™ç®¡ç†è§„åˆ™ï¼Œå¼€æ”¾æš´éœ²ç«¯å£ ä¸€ä¸ª33300ç«¯å£ï¼Œä¸€ä¸ª33301ç«¯å£ç”¨äºæä¾›sshæœåŠ¡ æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡ 123456789101112131415$ chmod 777 frps$ sudo vim /usr/lib/systemd/system/frps.service[Unit]Description=frps ServiceDocumentation=https://github.com/fatedier/frpAfter=network.target nss-lookup.target[Service]ExecStart=/usr/local/frp/frps -c /usr/local/frp/frps.ini Restart=on-failureRestartPreventExitStatus=23[Install]WantedBy=multi-user.target é‡è½½æœåŠ¡ï¼šsystemctl daemon-reload å¼€å¯æœåŠ¡ï¼šsystemctl start frps æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šsystemctl status frpc è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼šsystemctl enable frps å®¢æˆ·ç«¯é…ç½® ä¿®æ”¹å®¢æˆ·ç«¯é…ç½® 123456789101112$ sudo vim /usr/local/frp/frpc.ini[common]server_addr = ä½ çš„æœåŠ¡å™¨å…¬ç½‘ipserver_port = 33300tls_enable = true[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 33301 # sshç«¯å£ æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡ 1234567891011121314$ sudo vim /usr/lib/systemd/system/frpc.service[Unit]Description=frps ServiceDocumentation=https://github.com/fatedier/frpAfter=network.target nss-lookup.target[Service]ExecStart=/usr/local/frp/frpc -c /usr/local/frp/frpc.iniRestart=on-failureRestartPreventExitStatus=23[Install]WantedBy=multi-user.target é‡è½½æœåŠ¡ï¼šsystemctl daemon-reload å¼€å¯æœåŠ¡ï¼šsystemctl start frpc æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šsystemctl status frpc è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼šsystemctl enable frpc SSHè¿æ¥1ssh -p 33301 username@ip","link":"/2023/11/20/%E9%83%A8%E7%BD%B2FRP%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"}],"tags":[{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"PyTorch","slug":"PyTorch","link":"/tags/PyTorch/"},{"name":"Docker","slug":"Docker","link":"/tags/Docker/"},{"name":"Git","slug":"Git","link":"/tags/Git/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"Nginx","slug":"Nginx","link":"/tags/Nginx/"},{"name":"Network","slug":"Network","link":"/tags/Network/"},{"name":"Windows","slug":"Windows","link":"/tags/Windows/"},{"name":"SSL","slug":"SSL","link":"/tags/SSL/"},{"name":"CUDA","slug":"CUDA","link":"/tags/CUDA/"}],"categories":[{"name":"DL","slug":"DL","link":"/categories/DL/"},{"name":"ToolKits","slug":"ToolKits","link":"/categories/ToolKits/"},{"name":"OS","slug":"OS","link":"/categories/OS/"},{"name":"ToolKits","slug":"OS/ToolKits","link":"/categories/OS/ToolKits/"}],"pages":[]}